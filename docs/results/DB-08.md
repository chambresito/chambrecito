# DB-08: Add Primary Keys to All Tables

## Status: Complete

## Description

Add primary keys to all database tables.

## Implementation Details

**Source File:** `supabase/migrations/001_init.sql`

### Primary Keys by Table

| Table | Primary Key | Type | Default |
|-------|-------------|------|---------|
| `markets` | `id` | `uuid` | `gen_random_uuid()` |
| `predictions` | `id` | `uuid` | `gen_random_uuid()` |
| `token_ledger` | `id` | `uuid` | `gen_random_uuid()` |
| `resolution_rules` | `id` | `uuid` | `gen_random_uuid()` |
| `market_snapshots` | `id` | `uuid` | `gen_random_uuid()` |
| `user_roles` | `user_id` | `uuid` | (no default - provided by auth) |
| `reputation_points` | `id` | `uuid` | `gen_random_uuid()` |

### Implementation Pattern

All tables use UUID primary keys with `gen_random_uuid()` for automatic generation (except `user_roles` which uses the auth user ID directly):

```sql
id uuid primary key default gen_random_uuid()
```

This requires the `pgcrypto` extension:

```sql
create extension if not exists "pgcrypto";
```

### Design Notes

- UUIDs prevent enumeration attacks
- `gen_random_uuid()` provides cryptographically secure random UUIDs
- `user_roles` uses `user_id` as PK since there's a 1:1 relationship with auth users
